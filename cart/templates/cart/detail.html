{% load i18n %}
{% load static %}
{% load cart_tags %}
<div class="table-responsive px-0 px-md-3">
  <table class="table table-striped shadow rounded" id="theTable">
    <thead>
      <tr class="text-center text-white bg-primary px-0">
        <th colspan="2">{% trans 'Product'%}</th>
        <th class="px-0">{% trans 'Price' %} (u)</th>
        <th>{% trans 'Quantity'%}</th>
        <th class="px-0">{% trans 'Price'%}</th>
        <th class="px-0">{% trans 'Remove'%}</th>
      </tr>
    </thead>
    <tbody>
      {% for item in cart %}
        {% with product=item.product %}
        {% with add_ons=product.add_on.all %}
          <tr class="text-center">
            <td colspan="2">
                {{ product.price.item }}
                {% if product.price.size != "Unique" %}
                    (<small><strong>{% trans product.price.size %}</strong></small>)
                {% endif %}
                {% for add in add_ons%}
                <small>{{add}}</small> -
                {% endfor %}
            </td>
              <td class="num">{{ item.price_str }}</td>
            <td>

             <div class="d-flex justify-content-between px-1 px-lg-2 mt-1">
                <div>
                    <button class="btn btn-sm rounded-circle text-white bg-primary border" type="button"
                            onclick="toCart({{product.price.item.id}},-1, {{product.id}})"><i class="fas fa-minus"></i></button>
                </div>
               <div class="text-center px-2 text-dark">
                   <strong>{{ item.quantity }}</strong>
               </div>
                <div>
                    <button class="btn btn-sm rounded-circle text-white bg-primary border" type="button"
                            onclick="toCart({{product.price.item.id}}, 1, {{product.id}})"><i class="fas fa-plus"></i></button>
                </div>
            </div>
            </td>
            <td class="num">{% to_currency item.total_price %}</td>
            <td><a onclick="removeItem({{product.id}})" class="btn btn-sm rounded-circle text-danger"><i class="fas fa-times-circle fa-2x"></i></a></td>


          </tr>
        {% endwith %}
        {% endwith %}
      {% endfor %}
    </tbody>
    </table>
</div>
<div class="row lead text-center bg-primary text-white mx-3 px-1 px-md-5 mb-2">
  <div class="col-2">Total</div>
  <div class="col-10 text-right">{% to_currency cart.get_total_price %}</div>
</div>
<div class="text-right">
    {% if cart|length > 0 %}
    <a type="button" class="btn btn-success float-right mx-3" href="{{wurl}}">
        {%trans 'Confirm and Send'%} <i class="fab fa-whatsapp"></i>
    </a>
    {% else %}
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">{%trans 'Close'%}</button>
      </div>
    {% endif %}
</div>
